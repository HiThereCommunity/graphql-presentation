
class Joke {
  static async gen(viewer: User, id: string): Promise<?Joke> {
    const data = await db.joke.findById(id);
    if (data == null) return null;
    const canSee = canYouSeeThisJoke(viewer, data);
    return canSee ? new Joke(data) : null;
  }
  static async all(viewer: User): Promise<Array<Joke>> {
    const data = await db.joke.findAll({
      where: {
        creator: viewer.id
      },
      attributes: ["id"]
    });

    return data.map(entry => Joke.gen(viewer, entry.id));
  }
}
